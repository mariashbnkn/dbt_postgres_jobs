version: 2

models:
  - name: stg_jobs__raw_jobs
    columns:
      - name: job_link
        data_tests:
          - not_null
          - unique_job_link_date:
              column_name_2: first_seen_date
      - name: company
        data_tests:
          - not_null
      - name: job_level
        data_tests:
          - valid_job_level
    freshness:
          warn_after:
            count: 6
            period: hour
          error_after:
            count: 1
            period: day
          filter: first_seen::date > CURRENT_DATE - 1
          loaded_at_field: first_seen::timestamp